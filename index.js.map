{"version":3,"file":"index.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\n\nconst createGalleryCardTemplate = ({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) => {\n  return `\n    <div class=\"gallery-wrapper\">\n      <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\">\n        <ul class=\"gallery-info-list\">\n          <li class=\"gallery-info-item\">\n            <p class=\"gallery-info-title\">Likes</p>\n            <p class=\"gallery-info-value\">${likes}</p>\n          </li>\n          <li class=\"gallery-info-item\">\n            <p class=\"gallery-info-title\">Views</p>\n            <p class=\"gallery-info-value\">${views}</p>\n          </li>\n          <li class=\"gallery-info-item\">\n            <p class=\"gallery-info-title\">Comments</p>\n            <p class=\"gallery-info-value\">${comments}</p>\n          </li>\n          <li class=\"gallery-info-item\">\n            <p class=\"gallery-info-title\">Downloads</p>\n            <p class=\"gallery-info-value\">${downloads}</p>\n          </li>\n        </ul>\n      </a>\n    </div>\n  `;\n};\n\nexport const galleryCardsTemplate = items =>\n  items.map(item => createGalleryCardTemplate(item)).join('');\n\nexport const lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\n// DOM elemanlarını seç\nconst galleryContainer = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.btn-load-more');\n\nexport function renderGallery(items) {\n  galleryContainer.insertAdjacentHTML('beforeend', galleryCardsTemplate(items));\n  lightbox.refresh();\n}\n\nexport function clearGallery() {\n  galleryContainer.innerHTML = '';\n}\n\nexport function showLoader() {\n  if (loader) loader.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  if (loader) loader.classList.add('hidden');\n}\n\nexport function showLoadMoreBtn() {\n  if (loadMoreBtn) loadMoreBtn.classList.add('is-visible');\n}\n\nexport function hideLoadMoreBtn() {\n  if (loadMoreBtn) loadMoreBtn.classList.remove('is-visible');\n}","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const fetchPhotosByQuery = async (q, currentPage) => {\n  try {\n    const searchParams = {\n      q,\n      page: currentPage,\n      key: '50407836-8adbdb7013dbe19a53a013547',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n      per_page: 15,\n    };\n\n    const response = await axios.get('', { params: searchParams });\n    return {\n      images: response.data.hits,\n      total: response.data.totalHits,\n    };\n  } catch (error) {\n    console.log(error.message);\n    return { images: [], total: 0 };\n  }\n};","import iziToast from 'izitoast';\nimport { galleryCardsTemplate, lightbox } from './js/render-functions';\nimport { fetchPhotosByQuery } from './js/pixabay-api';\n\nconst refs = {\n  searchForm: document.querySelector('.form'),\n  gallery: document.querySelector('.gallery'),\n  loader: document.querySelector('.loader'),\n  btnLoadMore: document.querySelector('.btn-load-more'),\n};\n\nconst itemsPerPage = 15;\nlet totalPages;\nlet currentPage;\nlet searchQuery;\nlet elemHeight;\n\nfunction showLoader() {\n  refs.loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  refs.loader.classList.add('hidden');\n}\n\nconst onSearchFormSubmit = async event => {\n  event.preventDefault();\n\n  currentPage = 1;\n  refs.gallery.innerHTML = '';\n  refs.btnLoadMore.classList.remove('is-visible');\n\n  searchQuery = event.currentTarget.elements.search_text.value.trim();\n\n  if (searchQuery === '') {\n    iziToast.error({\n      title: 'Error',\n      message: 'Input cannot be empty!',\n      position: 'topRight',\n    });\n    refs.btnLoadMore.classList.remove('is-visible');\n    event.currentTarget.elements.search_text.value = '';\n    return;\n  }\n\n  showLoader();\n  try {\n    const { images, total } = await fetchPhotosByQuery(searchQuery, currentPage);\n\n    if (images.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n      });\n      refs.searchForm.reset();\n      refs.btnLoadMore.classList.remove('is-visible');\n      return;\n    }\n\n    refs.gallery.innerHTML = galleryCardsTemplate(images);\n    lightbox.refresh();\n    currentPage += 1;\n\n    if (images.length < itemsPerPage) {\n      refs.btnLoadMore.classList.remove('is-visible');\n    } else {\n      refs.btnLoadMore.classList.add('is-visible');\n    }\n\n    const firstCard = document.querySelector('.gallery-wrapper');\n    if (firstCard) {\n      elemHeight = firstCard.getBoundingClientRect().height;\n    }\n  } catch (error) {\n    iziToast.error({ title: 'Error', message: error.message });\n  } finally {\n    hideLoader();\n  }\n};\n\nconst onBtnLoadMoreClick = async () => {\n  showLoader();\n  try {\n    const { images, total } = await fetchPhotosByQuery(searchQuery, currentPage);\n\n    refs.gallery.insertAdjacentHTML('beforeend', galleryCardsTemplate(images));\n    lightbox.refresh();\n\n    window.scrollBy({\n      top: elemHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n\n    totalPages = Math.ceil(total / itemsPerPage);\n\n    if (currentPage === totalPages || images.length < itemsPerPage) {\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      refs.btnLoadMore.classList.remove('is-visible');\n      return;\n    }\n\n    currentPage += 1;\n    refs.btnLoadMore.classList.add('is-visible');\n  } catch (error) {\n    iziToast.error({\n      message: error.message,\n      position: 'topRight',\n    });\n    console.log(error.message);\n  } finally {\n    hideLoader();\n  }\n};\n\nrefs.searchForm.addEventListener('submit', onSearchFormSubmit);\nrefs.btnLoadMore.addEventListener('click', onBtnLoadMoreClick);"],"names":["createGalleryCardTemplate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","galleryCardsTemplate","items","item","lightbox","SimpleLightbox","axios","fetchPhotosByQuery","q","currentPage","searchParams","response","error","refs","itemsPerPage","totalPages","searchQuery","elemHeight","showLoader","hideLoader","onSearchFormSubmit","event","iziToast","images","total","firstCard","onBtnLoadMoreClick"],"mappings":"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"}